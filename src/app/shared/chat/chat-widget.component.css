/* Nút chat nổi */
.chat-button {
  position: fixed;
  bottom: 80px;
  right: 20px;
  background: #007bff;
  color: white;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  font-size: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 14px 38px rgba(0,0,0,.22);
  transition: transform .15s;
  z-index: 999;
}
.chat-button:hover { transform: scale(1.06); }

/* Danh sách chat + form nhóm */
.chat-list {
  position: fixed;
  bottom: 150px;
  right: 20px;
  width: 320px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 22px 50px rgba(0,0,0,.2);
  padding: 12px;
  z-index: 1000;
}
.section-title {
  margin: 12px 0 6px;
  font-weight: 700;
  font-size: 13px;
  color: #444;
  text-transform: uppercase;
  letter-spacing: .5px;
}
.chat-list h4 { margin: 0 0 10px; font-size: 16px; }
.chat-list ul { list-style: none; padding: 0; margin: 0; }
.chat-list li {
  padding: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  border-radius: 10px;
  gap: 10px;
}
.chat-list li:hover { background: #f5f7fb; }
.avatar { width: 32px; height: 32px; border-radius: 50%; flex: 0 0 32px; object-fit: cover; }
.avatar-lg { width: 96px; height: 96px; border-radius: 50%; object-fit: cover; }
.item-col { display: flex; flex-direction: column; }
.title { font-weight: 600; }
.sub { font-size: 12px; color: #666; }
.create-group-btn {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
  background: #007bff;
  border: none;
  border-radius: 12px;
  color: white;
  cursor: pointer;
}

/* Form nhóm */
.lbl { font-size: 13px; color: #333; margin-bottom: 6px; display:block; }
.group-input {
  width: 100%;
  padding: 8px 10px;
  margin-bottom: 10px;
  border: 1px solid #dcdfe6;
  border-radius: 10px;
}
.user-picker li { padding: 6px; }
.user-check { display: flex; align-items: center; gap: 10px; cursor: pointer; }
.user-check input { transform: scale(1.1); }
.row-justified { justify-content: space-between; width: 100%; }
.row-left { display:flex; align-items:center; gap:10px; }
.group-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 10px; }
.group-actions .submit {
  background: #007bff; color: #fff; border: none; padding: 8px 12px; border-radius: 10px; cursor: pointer;
}
.cancel-btn {
  background: #e5e7eb; color: #111; border: none; padding: 8px 12px; border-radius: 10px; cursor: pointer;
}

/* ===== Dock chứa nhiều cửa sổ ===== */
.chat-dock {
  position: fixed;
  bottom: 150px;
  right: 380px;
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  gap: 12px;
  max-width: calc(100vw - 380px);
  z-index: 1001;
}

/* Ô chat */
.chat-box {
  width: 360px;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 22px 50px rgba(0,0,0,.22);
  display: flex;
  flex-direction: column;
  transition: box-shadow .15s, transform .15s;
}
.chat-box.is-active { box-shadow: 0 26px 60px rgba(0,0,0,.28); transform: translateY(-2px); }

.chat-header {
  padding: 10px 12px;
  background: #007bff;
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-radius: 14px 14px 0 0;
  gap: 8px;
  position: relative;
}
.header-left { display:flex; align-items:center; gap:10px; }
.head-col { display:flex; flex-direction:column; }
.chat-header .close-btn {
  background: transparent;
  border: none;
  color: white;
  font-size: 18px;
  cursor: pointer;
}
.header-actions { display:flex; align-items:center; gap:6px; position: relative; }
.icon-only {
  background: #ffffff33;
  color: #fff;
  border: 1px solid #ffffff55;
  padding: 6px 8px;
  border-radius: 8px;
  cursor: pointer;
}

/* Menu nổi (đổi class để tránh đụng bootstrap) */
.app-menu {
  position: absolute;
  top: 40px;
  right: 36px;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  min-width: 180px;
  box-shadow: 0 14px 30px rgba(0,0,0,.18);
  overflow: hidden;
  z-index: 5;
}
.menu-item { padding: 10px 12px; font-size: 14px; cursor: pointer; color:black;}
.menu-item:hover { background: #f5f7fb; }
.menu-item.danger { color: #d52020; }

/* Member panel */
.member-panel { padding: 10px; border-bottom: 1px solid #e5e7eb; max-height: 340px; overflow: auto; }
.member-grid { display: grid; gap: 10px; }

/* Chat body */
.chat-body { padding: 10px; height: 280px; overflow-y: auto; background: #fafafa; }
.msg-wrap { display: flex; }
.msg { padding: 8px 12px; margin: 6px 0; border-radius: 14px; max-width: 75%; word-wrap: break-word; }
.msg.me { background: #007bff; color: white; margin-left: auto; }
.msg.other { background: #eef1f5; margin-right: auto; color: #111; }
.msg .time { font-size: 10px; opacity: 0.8; margin-top: 4px; }
.file-image { display: flex; flex-direction: column; gap: 6px; }
.file-name { font-size: 12px; opacity: 0.9; }
.file-link { text-decoration: none; color: inherit; }
.chat-img { max-width: 180px; border-radius: 8px; display: block; }

/* Footer */
.chat-footer { border-top: 1px solid #e5e7eb; padding: 8px; display: grid; grid-template-columns: auto 1fr auto; gap: 8px; align-items: center; }
.icon-btn, .send-btn { background: #007bff; color: white; border: none; padding: 8px 10px; border-radius: 10px; cursor: pointer; }
textarea { border: 1px solid #dcdfe6; border-radius: 10px; resize: none; padding: 8px 10px; height: 38px; max-height: 90px; outline: none; background: #fff; }
.picked-file { grid-column: 1 / -1; display: flex; align-items: center; gap: 6px; background: #f3f4f6; border: 1px dashed #d1d5db; padding: 6px 8px; border-radius: 8px; margin-bottom: 4px; font-size: 13px; }
.picked-file .x { background: transparent; border: none; font-size: 16px; cursor: pointer; }

/* ===== Modal (đổi class để tránh đụng bootstrap) ===== */
.app-modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.35);
  z-index: 1100;
}
.app-modal {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 360px;
  max-width: calc(100% - 40px);
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 22px 50px rgba(0,0,0,.22);
  padding: 16px;
  z-index: 1101;
}
.modal-actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 8px; }
.avatar-preview { display:flex; justify-content:center; margin: 8px 0 12px; }
.submit.danger { background:#ff4d4f; color:#fff; border:none; }
