<div class="account-pages min-vh-100 d-flex align-items-center justify-content-center bg-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-sm-10 col-md-8 col-lg-6">
        <div class="signup-card bg-white rounded-3 shadow-sm p-4 p-sm-5">

          <!-- Logo -->
          <div class="text-center mb-4">
            <div class="logo-circle mx-auto mb-3">
              <svg class="text-primary" width="32" height="32" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path>
                <path d="M15.5 12.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm2 0c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5z"></path>
              </svg>
            </div>
            <h4 class="fw-bold mb-0">Tạo tài khoản mới</h4>
          </div>

          <!-- Signup Form -->
          <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">

            <!-- Full Name Field -->
            <div class="mb-3">
              <label for="fullname" class="form-label text-dark">Họ và tên</label>
              <input
                type="text"
                class="form-control"
                id="fullname"
                formControlName="fullname"
                placeholder="Nhập họ và tên của bạn"
                [ngClass]="{
                  'is-invalid': isFieldInvalid('fullname'),
                  'is-valid': isFieldValid('fullname')
                }">
              <div *ngIf="isFieldInvalid('fullname')" class="invalid-feedback">
                <span *ngIf="f.fullname.errors?.required">Họ và tên là bắt buộc</span>
                <span *ngIf="f.fullname.errors?.minlength">Họ và tên phải có ít nhất 2 ký tự</span>
              </div>
            </div>

            <!-- Email Field -->
            <div class="mb-3">
              <label for="email" class="form-label text-dark">Email hoặc Số điện thoại</label>
              <div class="position-relative">
                <input
                  type="text"
                  class="form-control"
                  id="email"
                  formControlName="email"
                  placeholder="Nhập email hoặc số điện thoại"
                  [ngClass]="{
                    'is-invalid': isFieldInvalid('email'),
                    'is-valid': isFieldValid('email')
                  }">
                <span *ngIf="isFieldValid('email')" class="valid-icon">
                  <i class="mdi mdi-check-circle text-success"></i>
                </span>
              </div>
              <div *ngIf="isFieldInvalid('email')" class="invalid-feedback d-block">
                <span *ngIf="f.email.errors?.required">Email là bắt buộc</span>
                <span *ngIf="f.email.errors?.email">Định dạng email không đúng</span>
              </div>
            </div>

            <!-- Password Field -->
            <div class="mb-3">
              <label for="password" class="form-label text-dark">Mật khẩu</label>
              <div class="position-relative">
                <input
                  [type]="passwordVisible ? 'text' : 'password'"
                  class="form-control password-input"
                  id="password"
                  formControlName="password"
                  placeholder="Ít nhất 6 ký tự"
                  [ngClass]="{
                    'is-invalid': isFieldInvalid('password'),
                    'is-valid': isFieldValid('password')
                  }">
                <span class="password-toggle-icon" (click)="togglePasswordVisibility()">
                  <i class="mdi" [ngClass]="passwordVisible ? 'mdi-eye-off-outline' : 'mdi-eye-outline'"></i>
                </span>
              </div>
              <div *ngIf="isFieldInvalid('password')" class="invalid-feedback d-block">
                <span *ngIf="f.password.errors?.required">Mật khẩu là bắt buộc</span>
                <span *ngIf="f.password.errors?.minlength">Mật khẩu phải có ít nhất 6 ký tự</span>
              </div>
            </div>

            <!-- Terms and Conditions -->
            <div class="mb-4">
              <p class="text-muted mb-0">
                Bằng cách đăng ký, bạn đồng ý với
                <a href="javascript:void(0);" class="text-primary text-decoration-none">Điều khoản dịch vụ</a>
                của chúng tôi.
              </p>
            </div>

            <!-- Signup Button -->
            <div class="mb-4">
              <button type="submit" class="btn btn-primary w-100 fw-medium" [disabled]="loading">
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                <span>{{ loading ? 'Đang đăng ký...' : 'Đăng ký' }}</span>
              </button>
            </div>

          </form>

          <!-- Separator -->
          <div class="position-relative mb-4">
            <hr class="text-muted">
            <span class="separator-text">hoặc</span>
          </div>

          <!-- Social Signup Buttons -->
          <div class="d-grid gap-3 mb-4">
            <button type="button" class="btn btn-outline-dark d-flex align-items-center justify-content-center gap-2" (click)="signupWithGoogle()">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.64 9.20454C17.64 8.56636 17.5827 7.95272 17.4764 7.36363H9V10.845H13.8436C13.635 11.97 13.0009 12.9231 12.0477 13.5613V15.8195H14.9564C16.6582 14.2527 17.64 11.9454 17.64 9.20454Z" fill="#4285F4"/>
                <path d="M9 18C11.43 18 13.4673 17.1941 14.9564 15.8195L12.0477 13.5613C11.2418 14.1013 10.2109 14.4204 9 14.4204C6.65591 14.4204 4.67182 12.8372 3.96409 10.71H0.957275V13.0418C2.43818 15.9831 5.48182 18 9 18Z" fill="#34A853"/>
                <path d="M3.96409 10.71C3.78409 10.17 3.68182 9.59318 3.68182 9C3.68182 8.40682 3.78409 7.83 3.96409 7.29V4.95818H0.957275C0.347727 6.17318 0 7.54773 0 9C0 10.4523 0.347727 11.8268 0.957275 13.0418L3.96409 10.71Z" fill="#FBBC05"/>
                <path d="M9 3.57955C10.3214 3.57955 11.5077 4.03364 12.4405 4.92545L15.0218 2.34409C13.4632 0.891818 11.4259 0 9 0C5.48182 0 2.43818 2.01682 0.957275 4.95818L3.96409 7.29C4.67182 5.16273 6.65591 3.57955 9 3.57955Z" fill="#EA4335"/>
              </svg>
              <span>Đăng ký với Google</span>
            </button>

            <button type="button" class="btn btn-outline-primary d-flex align-items-center justify-content-center gap-2" (click)="signupWithFacebook()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="#1877F2" xmlns="http://www.w3.org/2000/svg">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
              <span>Đăng ký với Facebook</span>
            </button>
          </div>

          <!-- Login Link -->
          <div class="text-center">
            <p class="text-muted mb-0">
              Đã có tài khoản?
              <a href="javascript:void(0);" class="text-primary fw-semibold text-decoration-none" (click)="goToLogin()">Đăng nhập</a>
            </p>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
